<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Tue Oct 25 11:34:00 CEST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AMQPSpout (Storm AMQP Spout 0.3-SNAPSHOT API)</title>
<meta name="date" content="2016-10-25">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AMQPSpout (Storm AMQP Spout 0.3-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AMQPSpout.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/rapportive/storm/spout/AMQPSpout.html" target="_top">Frames</a></li>
<li><a href="AMQPSpout.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.rapportive.storm.spout</div>
<h2 title="Class AMQPSpout" class="title">Class AMQPSpout</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.rapportive.storm.spout.AMQPSpout</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a>, org.apache.storm.spout.ISpout, org.apache.storm.topology.IComponent, org.apache.storm.topology.IRichSpout</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">AMQPSpout</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements org.apache.storm.topology.IRichSpout</pre>
<div class="block">Spout to feed messages into Storm from an AMQP queue. Each message routed to the queue will be emitted as a Storm
 tuple. The message will be acked or rejected once the topology has respectively fully processed or failed the
 corresponding tuple.
 <p>
 <p>
 <strong>N.B.</strong> if you need to guarantee all messages are reliably processed, you should have AMQPSpout consume
 from a queue that is
 <em>not</em> set as 'exclusive' or 'auto-delete': otherwise if the spout task crashes or is restarted, the queue will
 be deleted and any messages in it lost, as will any messages published while the task remains down. See
 <a href="../../../../com/rapportive/storm/amqp/SharedQueueWithBinding.html" title="class in com.rapportive.storm.amqp"><code>SharedQueueWithBinding</code></a> to declare a shared queue that allows for guaranteed
 processing. (For prototyping, an <a href="../../../../com/rapportive/storm/amqp/ExclusiveQueueWithBinding.html" title="class in com.rapportive.storm.amqp"><code>ExclusiveQueueWithBinding</code></a> may be simpler to
 manage.)</p>
 <p>
 <p>
 <strong>N.B.</strong> this does not currently handle malformed messages (which cannot be deserialised by the provided
 <code>Scheme</code>) very well: the spout worker will crash if it fails to serialise a message.</p>
 <p>
 <p>
 This consumes messages from AMQP asynchronously, so it may receive messages before Storm requests them as tuples;
 therefore it buffers messages in an internal queue. To avoid this buffer growing large and consuming too much RAM,
 set <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#CONFIG_PREFETCH_COUNT"><code>CONFIG_PREFETCH_COUNT</code></a>.</p>
 <p>
 <p>
 This spout can be distributed among multiple workers, depending on the queue declaration: see
 <a href="../../../../com/rapportive/storm/amqp/QueueDeclaration.html#isParallelConsumable--"><code>QueueDeclaration.isParallelConsumable()</code></a>.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Sam Stokes (sam@rapportive.com)</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/rapportive/storm/amqp/QueueDeclaration.html" title="interface in com.rapportive.storm.amqp"><code>QueueDeclaration</code></a>, 
<a href="../../../../com/rapportive/storm/amqp/SharedQueueWithBinding.html" title="class in com.rapportive.storm.amqp"><code>SharedQueueWithBinding</code></a>, 
<a href="../../../../com/rapportive/storm/amqp/ExclusiveQueueWithBinding.html" title="class in com.rapportive.storm.amqp"><code>ExclusiveQueueWithBinding</code></a>, 
<a href="../../../../serialized-form.html#com.rapportive.storm.spout.AMQPSpout">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#CONFIG_PREFETCH_COUNT">CONFIG_PREFETCH_COUNT</a></span></code>
<div class="block">Storm config key to set the AMQP basic.qos prefetch-count parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#ERROR_STREAM_NAME">ERROR_STREAM_NAME</a></span></code>
<div class="block">Name of the stream where malformed deserialized messages are sent for special handling.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#WAIT_AFTER_SHUTDOWN_SIGNAL">WAIT_AFTER_SHUTDOWN_SIGNAL</a></span></code>
<div class="block">Time in milliseconds to wait after losing connection to the AMQP broker before attempting to reconnect.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#WAIT_FOR_NEXT_MESSAGE">WAIT_FOR_NEXT_MESSAGE</a></span></code>
<div class="block">Time in milliseconds to wait for a message from the queue if there is no message ready when the topology requests
 a tuple (via <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#nextTuple--"><code>nextTuple()</code></a>).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#AMQPSpout-java.lang.String-int-java.lang.String-java.lang.String-java.lang.String-com.rapportive.storm.amqp.QueueDeclaration-org.apache.storm.spout.Scheme-">AMQPSpout</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;host,
         int&nbsp;port,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;password,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;vhost,
         <a href="../../../../com/rapportive/storm/amqp/QueueDeclaration.html" title="interface in com.rapportive.storm.amqp">QueueDeclaration</a>&nbsp;queueDeclaration,
         org.apache.storm.spout.Scheme&nbsp;scheme)</code>
<div class="block">Create a new AMQP spout.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#AMQPSpout-java.lang.String-int-java.lang.String-java.lang.String-java.lang.String-com.rapportive.storm.amqp.QueueDeclaration-org.apache.storm.spout.Scheme-boolean-boolean-boolean-">AMQPSpout</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;host,
         int&nbsp;port,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;password,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;vhost,
         <a href="../../../../com/rapportive/storm/amqp/QueueDeclaration.html" title="interface in com.rapportive.storm.amqp">QueueDeclaration</a>&nbsp;queueDeclaration,
         org.apache.storm.spout.Scheme&nbsp;scheme,
         boolean&nbsp;requeueOnFail,
         boolean&nbsp;enableErrorStream,
         boolean&nbsp;autoAck)</code>
<div class="block">Create a new AMQP spout.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#ack-java.lang.Object-">ack</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;msgId)</code>
<div class="block">Acks the message with the AMQP broker.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#activate--">activate</a></span>()</code>
<div class="block">Resumes a paused spout</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#close--">close</a></span>()</code>
<div class="block">Cancels the queue subscription, and disconnects from the AMQP broker.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#deactivate--">deactivate</a></span>()</code>
<div class="block">Pauses the spout</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#declareOutputFields-org.apache.storm.topology.OutputFieldsDeclarer-">declareOutputFields</a></span>(org.apache.storm.topology.OutputFieldsDeclarer&nbsp;declarer)</code>
<div class="block">Declares the output fields of this spout according to the provided <code>Scheme</code>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#fail-java.lang.Object-">fail</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;msgId)</code>
<div class="block">Tells the AMQP broker to drop (Basic.Reject) the message.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#getComponentConfiguration--">getComponentConfiguration</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#nextTuple--">nextTuple</a></span>()</code>
<div class="block">Emits the next message from the queue as a tuple.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#open-java.util.Map-org.apache.storm.task.TopologyContext-org.apache.storm.spout.SpoutOutputCollector-">open</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&nbsp;config,
    org.apache.storm.task.TopologyContext&nbsp;context,
    org.apache.storm.spout.SpoutOutputCollector&nbsp;collector)</code>
<div class="block">Connects to the AMQP broker, declares the queue and subscribes to incoming messages.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CONFIG_PREFETCH_COUNT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONFIG_PREFETCH_COUNT</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> CONFIG_PREFETCH_COUNT</pre>
<div class="block">Storm config key to set the AMQP basic.qos prefetch-count parameter. Defaults to 100.
 <p>
 <p>
 This caps the number of messages outstanding (i.e. unacked) at a time that will be sent to each spout worker.
 Increasing this will improve throughput if the network roundtrip time to the AMQP broker is significant compared
 to the time for the topology to process each message; this will also increase the RAM requirements as the
 internal message buffer grows.</p>
 <p>
 <p>
 AMQP allows a prefetch-count of zero, indicating unlimited delivery, but that is not allowed here to avoid
 unbounded buffer growth.</p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.rapportive.storm.spout.AMQPSpout.CONFIG_PREFETCH_COUNT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="WAIT_FOR_NEXT_MESSAGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WAIT_FOR_NEXT_MESSAGE</h4>
<pre>public static final&nbsp;long WAIT_FOR_NEXT_MESSAGE</pre>
<div class="block">Time in milliseconds to wait for a message from the queue if there is no message ready when the topology requests
 a tuple (via <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#nextTuple--"><code>nextTuple()</code></a>).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.rapportive.storm.spout.AMQPSpout.WAIT_FOR_NEXT_MESSAGE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="WAIT_AFTER_SHUTDOWN_SIGNAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WAIT_AFTER_SHUTDOWN_SIGNAL</h4>
<pre>public static final&nbsp;long WAIT_AFTER_SHUTDOWN_SIGNAL</pre>
<div class="block">Time in milliseconds to wait after losing connection to the AMQP broker before attempting to reconnect.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.rapportive.storm.spout.AMQPSpout.WAIT_AFTER_SHUTDOWN_SIGNAL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ERROR_STREAM_NAME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ERROR_STREAM_NAME</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_STREAM_NAME</pre>
<div class="block">Name of the stream where malformed deserialized messages are sent for special handling. Generally with a
 <code>Scheme</code> implementation returns null or a zero-length tuple. `enableErrorStream` must be true at
 construction.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AMQPSpout-java.lang.String-int-java.lang.String-java.lang.String-java.lang.String-com.rapportive.storm.amqp.QueueDeclaration-org.apache.storm.spout.Scheme-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AMQPSpout</h4>
<pre>public&nbsp;AMQPSpout(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;host,
                 int&nbsp;port,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;password,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;vhost,
                 <a href="../../../../com/rapportive/storm/amqp/QueueDeclaration.html" title="interface in com.rapportive.storm.amqp">QueueDeclaration</a>&nbsp;queueDeclaration,
                 org.apache.storm.spout.Scheme&nbsp;scheme)</pre>
<div class="block">Create a new AMQP spout. When <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#open-java.util.Map-org.apache.storm.task.TopologyContext-org.apache.storm.spout.SpoutOutputCollector-"><code>open(Map, TopologyContext, SpoutOutputCollector)</code></a> is called, it will
 declare a queue according to the specified
 <tt>queueDeclaration</tt>, subscribe to the queue, and start consuming messages. It will use the provided
 <tt>scheme</tt> to deserialise each AMQP message into a Storm tuple. Note that failed messages will not be
 requeued.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>host</code> - hostname of the AMQP broker node</dd>
<dd><code>port</code> - port number of the AMQP broker node</dd>
<dd><code>username</code> - username to log into to the broker</dd>
<dd><code>password</code> - password to authenticate to the broker</dd>
<dd><code>vhost</code> - vhost on the broker</dd>
<dd><code>queueDeclaration</code> - declaration of the queue / exchange bindings</dd>
<dd><code>scheme</code> - <code>Scheme</code> used to deserialise * each AMQP message into a Storm tuple</dd>
</dl>
</li>
</ul>
<a name="AMQPSpout-java.lang.String-int-java.lang.String-java.lang.String-java.lang.String-com.rapportive.storm.amqp.QueueDeclaration-org.apache.storm.spout.Scheme-boolean-boolean-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AMQPSpout</h4>
<pre>public&nbsp;AMQPSpout(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;host,
                 int&nbsp;port,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;password,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;vhost,
                 <a href="../../../../com/rapportive/storm/amqp/QueueDeclaration.html" title="interface in com.rapportive.storm.amqp">QueueDeclaration</a>&nbsp;queueDeclaration,
                 org.apache.storm.spout.Scheme&nbsp;scheme,
                 boolean&nbsp;requeueOnFail,
                 boolean&nbsp;enableErrorStream,
                 boolean&nbsp;autoAck)</pre>
<div class="block">Create a new AMQP spout. When <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#open-java.util.Map-org.apache.storm.task.TopologyContext-org.apache.storm.spout.SpoutOutputCollector-"><code>open(Map, TopologyContext, SpoutOutputCollector)</code></a> is called, it will
 declare a queue according to the specified
 <tt>queueDeclaration</tt>, subscribe to the queue, and start consuming messages. It will use the provided
 <tt>scheme</tt> to deserialise each AMQP message into a Storm tuple.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>host</code> - hostname of the AMQP broker node</dd>
<dd><code>port</code> - port number of the AMQP broker node</dd>
<dd><code>username</code> - username to log into to the broker</dd>
<dd><code>password</code> - password to authenticate to the broker</dd>
<dd><code>vhost</code> - vhost on the broker</dd>
<dd><code>queueDeclaration</code> - declaration of the queue / exchange bindings</dd>
<dd><code>scheme</code> - <code>Scheme</code> used to deserialise * each AMQP message into a Storm tuple</dd>
<dd><code>requeueOnFail</code> - whether messages should be requeued on failure</dd>
<dd><code>enableErrorStream</code> - emit error stream</dd>
<dd><code>autoAck</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="ack-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ack</h4>
<pre>public&nbsp;void&nbsp;ack(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;msgId)</pre>
<div class="block">Acks the message with the AMQP broker.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>ack</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msgId</code> - </dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Cancels the queue subscription, and disconnects from the AMQP broker.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
</dl>
</li>
</ul>
<a name="activate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activate</h4>
<pre>public&nbsp;void&nbsp;activate()</pre>
<div class="block">Resumes a paused spout</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>activate</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
</dl>
</li>
</ul>
<a name="deactivate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deactivate</h4>
<pre>public&nbsp;void&nbsp;deactivate()</pre>
<div class="block">Pauses the spout</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>deactivate</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
</dl>
</li>
</ul>
<a name="fail-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fail</h4>
<pre>public&nbsp;void&nbsp;fail(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;msgId)</pre>
<div class="block">Tells the AMQP broker to drop (Basic.Reject) the message.
 <p>
 requeueOnFail constructor parameter determines whether the message will be requeued.
 <p>
 <p>
 <strong>N.B.</strong> There's a potential for infinite redelivery in the event of non-transient failures (e.g.
 malformed messages).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>fail</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msgId</code> - </dd>
</dl>
</li>
</ul>
<a name="nextTuple--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextTuple</h4>
<pre>public&nbsp;void&nbsp;nextTuple()</pre>
<div class="block">Emits the next message from the queue as a tuple.
 <p>
 Serialization schemes returning null will immediately ack and then emit unanchored on the
 <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#ERROR_STREAM_NAME"><code>ERROR_STREAM_NAME</code></a> stream for further handling by the consumer.
 <p>
 <p>
 If no message is ready to emit, this will wait a short time (<a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#WAIT_FOR_NEXT_MESSAGE"><code>WAIT_FOR_NEXT_MESSAGE</code></a>) for one to arrive on
 the queue, to avoid a tight loop in the spout worker.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>nextTuple</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
</dl>
</li>
</ul>
<a name="open-java.util.Map-org.apache.storm.task.TopologyContext-org.apache.storm.spout.SpoutOutputCollector-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;void&nbsp;open(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&nbsp;config,
                 org.apache.storm.task.TopologyContext&nbsp;context,
                 org.apache.storm.spout.SpoutOutputCollector&nbsp;collector)</pre>
<div class="block">Connects to the AMQP broker, declares the queue and subscribes to incoming messages.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>open</code>&nbsp;in interface&nbsp;<code>org.apache.storm.spout.ISpout</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - </dd>
<dd><code>context</code> - </dd>
<dd><code>collector</code> - </dd>
</dl>
</li>
</ul>
<a name="declareOutputFields-org.apache.storm.topology.OutputFieldsDeclarer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>declareOutputFields</h4>
<pre>public&nbsp;void&nbsp;declareOutputFields(org.apache.storm.topology.OutputFieldsDeclarer&nbsp;declarer)</pre>
<div class="block">Declares the output fields of this spout according to the provided <code>Scheme</code>. *
 Additionally declares an error stream (see <a href="../../../../com/rapportive/storm/spout/AMQPSpout.html#ERROR_STREAM_NAME"><code>ERROR_STREAM_NAME</code></a> for handling malformed or empty messages to
 avoid infinite retry loops</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>declareOutputFields</code>&nbsp;in interface&nbsp;<code>org.apache.storm.topology.IComponent</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>declarer</code> - </dd>
</dl>
</li>
</ul>
<a name="getComponentConfiguration--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getComponentConfiguration</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;getComponentConfiguration()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getComponentConfiguration</code>&nbsp;in interface&nbsp;<code>org.apache.storm.topology.IComponent</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AMQPSpout.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/rapportive/storm/spout/AMQPSpout.html" target="_top">Frames</a></li>
<li><a href="AMQPSpout.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
